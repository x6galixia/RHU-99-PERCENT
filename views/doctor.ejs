<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/doctor-func.css" />
    <title>Doctor</title>
  </head>
  <body>
    <!-- User Info -->
    <div>
      <%= surname %> <%= firstname %> <%= middle_initial %> <%= profession %>
    </div>

    <!-- Search Form -->
    <form action="/search-patient" method="post">
      <input type="text" name="search" placeholder="Search name or unique ID" />
      <button type="submit">Search</button>
    </form>

    <!-- Inventory Form -->
    <form action="/doctor/inventory" method="get">
      <button type="submit">Inventory</button>
    </form>

    <!-- Logout Form -->
    <form action="/logout?_method=DELETE" method="POST">
      <div>
        <button type="submit">Log out</button>
      </div>
    </form>

    <!-- Patients Table -->
    <table>
      <thead>
        <tr>
          <th>User ID</th>
          <th>Lastname</th>
          <th>Firstname</th>
          <th>Middle name</th>
          <th>Purok/Street</th>
          <th>Barangay</th>
          <th>Town/City</th>
          <th>Birthdate</th>
          <th>Gender</th>
          <th>Age</th>
          <th>Phone no</th>
          <th>Email</th>
          <th>Philhealt no</th>
          <th>Occupation</th>
          <th>Guardian</th>
          <th>Vital Signs</th>
          <th>Prescribe</th>
          <th>Laboratory request</th>
          <th>Laboratory result</th>
        </tr>
      </thead>
      <tbody>
        <% if (patientListDrop && patientListDrop.length > 0) { %>
          <% patientListDrop.forEach(pt => { %>
            <tr>
              <td><%= pt.unq_id %></td>
              <td><%= pt.last_name %></td>
              <td><%= pt.first_name %></td>
              <td><%= pt.middle_name %></td>
              <td><%= pt.address %></td>
              <td><%= pt.barangay %></td>
              <td><%= pt.town %></td>
              <td><%= pt.birthdate %></td>
              <td><%= pt.gender %></td>
              <td><%= pt.age %></td>
              <td><%= pt.phone %></td>
              <td><%= pt.email %></td>
              <td><%= pt.philhealth_no %></td>
              <td><%= pt.occupation %></td>
              <td><%= pt.guardian %></td>
              <td>
                <!-- Vitals Button -->
                <button class="openVitals"
                  data-unq-id="<%= pt.unq_id %>"
                  data-full-name="<%= pt.first_name %> <%= pt.last_name %>"
                  data-height="<%= pt.height %>"
                  data-weight="<%= pt.weight %>"
                  data-systolic="<%= pt.systolic %>"
                  data-diastolic="<%= pt.diastolic %>"
                  data-temperature="<%= pt.temperature %>"
                  data-pulse-rate="<%= pt.pulse_rate %>"
                  data-respiratory-rate="<%= pt.respiratory_rate %>"
                  data-bmi="<%= pt.bmi %>"
                  data-comment="<%= pt.comment %>">Vital Signs</button>
              </td>
              <td><button class="openPrescribe">Prescribe</button></td>
              <td>
                <!-- Lab Request Button -->
                <button class="openLabReq"
                  data-unq-id="<%= pt.unq_id %>"
                  data-full-name="<%= pt.first_name %> <%= pt.last_name %>"
                  data-date="<%= pt.date_now %>"
                  data-age="<%= pt.age %>"
                  data-gender="<%= pt.gender %>"
                  data-birthdate="<%= pt.birthdate %>"
                  data-occupation="<%= pt.occupation %>"
                  data-guardian="<%= pt.guardian %>">Laboratory Request</button>
              </td>
              <td><button class="openLabRes">Laboratory Result</button></td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="19">No patients.</td>
          </tr>
        <% } %>
      </tbody>
    </table>

    <!-- Vital Signs Form -->
    <div id="vitalForm" style="display: none">
      <form>
        <div id="closeVitalsBtn">&times;</div>
        <div class="form">
          <h1>VITAL SIGNS</h1>
          <input type="text" id="unq_id" name="unq_id" placeholder="Unique ID" readonly />
          <input type="text" id="full_name" name="full_name" placeholder="Full name" readonly />
          <input type="text" id="height" name="height" placeholder="Height" readonly />
          <input type="text" id="weight" name="weight" placeholder="Weight" readonly />
          <input type="text" id="systolic" name="systolic" placeholder="Systolic" readonly />
          <input type="text" id="diastolic" name="diastolic" placeholder="Diastolic" readonly />
          <input type="text" id="temperature" name="temperature" placeholder="Temperature" readonly />
          <input type="text" id="pulse_rate" name="pulse_rate" placeholder="Pulse Rate" readonly />
          <input type="text" id="respiratory_rate" name="respiratory_rate" placeholder="Respiratory Rate" readonly />
          <input type="text" id="bmi" name="bmi" placeholder="BMI" readonly />
          <input type="text" id="comment" name="comment" placeholder="Comment" readonly />
        </div>
      </form>
    </div>

    <!-- Prescribe Form -->
    <div id="prescribeForm" style="display: none">
      <form>
        <div id="closePrescribeBtn">&times;</div>
        <h1>PRESCRIBE</h1>
        <!-- Add input fields as necessary -->
      </form>
    </div>

    <!-- Laboratory Request Form -->
    <div id="labRequestForm" style="display: none">
      <form>
        <div id="closeLabRequestBtn">&times;</div>
        <h1>LABORATORY REQUEST</h1>
        <input type="text" id="req_unq_id" name="unq_id" placeholder="Unique ID" readonly />
        <input type="text" id="req_full_name" name="full_name" placeholder="Full Name" readonly />
        <input type="date" id="req_date_now" name="date_now" readonly />
        <input type="number" id="req_age" name="age" placeholder="Age" readonly />
        <input type="text" id="req_gender" name="gender" placeholder="Gender" readonly />
        <input type="date" id="req_birthdate" name="birthdate" readonly />
        <input type="text" id="req_occupation" name="occupation" readonly />
        <input type="text" id="req_guardian" name="guardian" readonly />
      </form>
    </div>

    <!-- Laboratory Result Form -->
    <div id="labResultForm" style="display: none">
      <form>
        <div id="closeLabResultBtn">&times;</div>
        <h1>LABORATORY RESULT</h1>
        <!-- Add input fields as necessary -->
      </form>
    </div>

    <script src="/js/doctor-func.js"></script>
  </body>
</html>
